import yaml

# Load keys from the example.txt file
with open('example.txt', 'r') as f:
    keys = [line.strip() for line in f]
# Load the j.yaml file
with open('j.yaml', 'r') as f:
    data = yaml.safe_load(f)

# Iterate through the yaml data and replace values
i = 0
while i < len(data):
    # Check if current element is a key and if it's in our keys list
    if list(data.keys())[i] == "key" and data["key"] in keys:
        key_name = data["key"]
        # Look ahead for "value" field from current position
        for j in range(i+1, len(data)):
            if list(data.keys())[j] == "value":
                data["value"] = f"{{{{{key_name}}}}}"
                break
    i += 1

# Save the updated data back to the yaml file
with open('output2.0.yaml', 'w') as f:
    yaml.dump(data, f)

print("Replacements are done and 'output2.0.yaml' is created!")
