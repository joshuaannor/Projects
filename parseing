import yaml

# Load keys from the example.txt file
keys_to_replace = []
with open("example.txt", "r") as key_file:
    keys_to_replace = [line.strip() for line in key_file if line.strip()]

# Load the YAML file using safe_load
with open('j.yaml', 'r') as file:
    data = yaml.safe_load(file)

# Iterate through the list of dictionaries
for item in data:
    # Check if the current dictionary has both 'key' and 'value' keys
    if 'key' in item and 'value' in item:
        # If the key is one we want to replace
        if item['key'] in keys_to_replace:
            print(f"Replacing value for key {item['key']} with {{{{{item['key']}}}}}")
            item['value'] = f"{{{{{item['key']}}}}}"

# Save the updated YAML data to a new file
with open('output2.0.yaml', 'w') as file:
    yaml.dump(data, file, default_flow_style=False)

print("Replacements are done and 'output2.0.yaml' is created!")
